update_fastlane

default_platform(:mac)

platform :mac do
  lane :release do
    outputPath = "~/Desktop/"
    appFileName = outputPath + "/Sol.app"
    zipFileName = outputPath + "Sol.zip"
    
    # I do not want this since this is an open source repo and I won't share credentials with anyone
    # match(
    #   platform: "macos",
    #   type: "developer_id"
    # )

    build_mac_app(
      scheme: "macOS",
      workspace: "./macos/sol.xcworkspace",
      output_directory: outputPath,
      export_method: "developer-id"
    )

    notarize(
      package: appFileName,
      print_log: 'true',
      verbose: 'true'
    )

    zip(
      path: appFileName,
      output_path: zipFileName
    )
  end

  lane :dev do
    outputPath = "~/Desktop/"
    appFileName = outputPath + "/Sol.app"

    build_mac_app(
      scheme: "macOS",
      workspace: "./macos/sol.xcworkspace",
      output_directory: outputPath,
      export_method: "package"
    )
  end
end
